var e,t,n,o,r,a,i,l,s=Object.defineProperty,c=(e,t,n)=>(((e,t,n)=>{t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);import{V as A,S as d,R as u,B as h,a as f,b as g,M as m,c as w,C as p,d as b,N as v,e as E,D as y,P as C,W as L,f as S}from"./vendor.b3af24d5.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const B=new A,x=new d,I=new u,R=document.getElementById("link");function M(e,t){let n=t.clone();n.sub(e.position),e.rotation.y=-Math.atan2(n.x,-n.z),e.rotation.x=Math.atan2(n.y,Math.sqrt(n.x*n.x+n.z*n.z)),e.rotation.z=0}function k(e,t,n,o,r,a,i){let l=[[e+r,t],[e+r+n,t],[e+r,t-r],[e+r+n,t-r]],s=[[e+r+n,t-r],[e+r+n+n,t-r],[e+r+n,t],[e+r+n+n,t]],c=[[e,t-r],[e+r,t-r],[e,t-r-o],[e+r,t-r-o]],A=[[e+r,t-r],[e+n+r,t-r],[e+r,t-r-o],[e+n+r,t-r-o]],d=[[e+r+n,t-r],[e+r+r+n,t-r],[e+r+n,t-r-o],[e+r+r+n,t-r-o]],u=[[e+r+n+r,t-r],[e+r+n+r+n,t-r],[e+r+n+r,t-r-o],[e+r+n+r+n,t-r-o]],f=[];for(let h of d)f.push(h[0]/a),f.push(h[1]/i);for(let h of c)f.push(h[0]/a),f.push(h[1]/i);for(let h of l)f.push(h[0]/a),f.push(h[1]/i);for(let h of s)f.push(h[0]/a),f.push(h[1]/i);for(let h of A)f.push(h[0]/a),f.push(h[1]/i);for(let h of u)f.push(h[0]/a),f.push(h[1]/i);return new h(new Float32Array(f),2)}function U(){R.setAttribute("download",(""===se.value.trim()?"skin":se.value)+".png"),R.setAttribute("href",re.toDataURL("image/png").replace("image/png","image/octet-stream")),R.click()}const D=new f;let Y=!1,Q=!1,j=!1,N=!1,K="",T=-1;let X=!1;function F(e){Y=e}function H(e){Q=e}function z(e){j=e}function J(e){N=e}function W(e){K=e}function q(e){T=e}function O(e){X=e}class V{constructor(e,t,n,o){c(this,"innerLayer"),c(this,"outerLayer"),c(this,"visible",!0);const r=new g(o.x,o.y,o.z);r.setAttribute("uv",e);const a=new g(o.x+.5,o.y+.5,o.z+.5);a.setAttribute("uv",t),this.innerLayer=new m(r,we),this.innerLayer.position.copy(n),ye.push(this.innerLayer),P.add(this.innerLayer),this.outerLayer=new m(a,pe),this.outerLayer.position.copy(n),Ce.push(this.outerLayer),P.add(this.outerLayer)}enableAltMode(){this.innerLayer.material=be,this.visible?P.remove(this.outerLayer):(this.innerLayer.material=ve,P.add(this.innerLayer))}disableAltMode(){this.visible?Ee&&P.add(this.outerLayer):P.remove(this.innerLayer),this.innerLayer.material=we}setVisible(e){this.visible=e,this.innerLayer.material=e?be:ve}}let G=window.innerWidth,Z=window.innerHeight;const P=new w;P.background=new p(3684408);let $=0;const _=[],ee=[],te=document.getElementById("layers"),ne=[],oe=[],re=document.createElement("canvas");re.width=64,re.height=64;const ae=re.getContext("2d"),ie=document.createElement("canvas");ie.width=64,ie.height=64;const le=ie.getContext("2d"),se=document.getElementById("skin-name-input"),ce=document.getElementById("save"),Ae=document.getElementById("texture-canvas"),de=Ae.getContext("2d");de.imageSmoothingEnabled=!1;let ue=1,he={x:0,y:0};const fe={x:0,y:0},ge=document.createElement("img");ge.src="data:image/png;base64,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",ge.addEventListener("load",(()=>{var e,t;64===ge.width&&64===ge.height?(null==(e=ee[0])||e.clearRect(0,0,64,64),null==(t=ee[0])||t.drawImage(ge,0,0),at()):alert("Skin texture must be 64x64")}));const me=new b(re);me.minFilter=v,me.magFilter=v;const we=new E({color:16777215,map:me,depthWrite:!0,depthTest:!0,side:y}),pe=new E({color:16777215,transparent:!0,map:me,depthWrite:!0,depthTest:!0,side:y}),be=new E({color:16777215,depthWrite:!0,depthTest:!0,side:y}),ve=new E({color:0,depthWrite:!0,depthTest:!0,side:y});let Ee=!0;const ye=[],Ce=[],Le=[new V(k(0,64,8,8,8,64,64),k(32,64,8,8,8,64,64),new A(0,12,0),new A(8,8,8)),new V(k(16,48,8,12,4,64,64),k(16,32,8,12,4,64,64),new A(0,2,0),new A(8,12,4)),new V(k(40,48,3,12,4,64,64),k(40,32,3,12,4,64,64),new A(-5.5,2,0),new A(3,12,4)),new V(k(32,16,3,12,4,64,64),k(48,16,3,12,4,64,64),new A(5.5,2,0),new A(3,12,4)),new V(k(0,48,4,12,4,64,64),k(0,32,4,12,4,64,64),new A(-2,-10,0),new A(4,12,4)),new V(k(16,16,4,12,4,64,64),k(0,16,4,12,4,64,64),new A(2,-10,0),new A(4,12,4))];$e();const Se=new C(75,G/Z,.1,1e3);Se.rotation.order="ZYX",Se.position.set(24,24,24);const Be=new L;Be.setSize(G,Z),Be.domElement.id="dom-element",document.body.appendChild(Be.domElement);const xe=document.getElementById("color-result"),Ie=xe.getContext("2d"),Re=document.getElementById("color-h"),Me=Re.getContext("2d"),ke=document.getElementById("color-s"),Ue=ke.getContext("2d"),De=document.getElementById("color-l"),Ye=De.getContext("2d"),Qe=document.getElementById("color-r"),je=Qe.getContext("2d"),Ne=document.getElementById("color-g"),Ke=Ne.getContext("2d"),Te=document.getElementById("color-b"),Xe=Te.getContext("2d"),Fe=document.getElementById("color-a"),He=Fe.getContext("2d"),ze=document.getElementById("color-picker"),Je={h:0,s:0,l:0},We={r:0,g:0,b:0};let qe=0;const Oe=document.getElementById("hotbar"),Ve=document.createElement("img");Ve.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALYAAAAWCAYAAABt7GbqAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAF4SURBVGhD7dtBboJQEAbgwTR1h01NPAo36G3gNByBBQt2bHsDF97AsHXDAWya0L4HWt44XYyPLjr+X/JHwT8TFyOJCSRENHwHwBS/2IfDwR8cj0f/Onc6naZ3AP9DURTjYjdNQ23bjmcjbLdb6vuesiyj/X4/nb0f5sV51HlVVYWLXdf1+1iRrddE5zPR0zPR58d0cibP87f5F8W8EOaF/mqeW+zVdO5qt9v9ms1mfH19uf3MJU3TacoPqXcJ5oXBvOXm3Sw2gAV+sfEHEazBFRtMwmKDSVhsMAmLDSZhscEkLDaYFCx2ksSFkzqacFJHE07qaMJJHU04qaMJJ3U04aSOJpzU0WQOV2wwKVjsYYgLJ3U04aSOJpzU0YSTOppwUkcTTupowkkdTTipo8kcrthgEhYbTFp0sVerZX8nmBfnkee5/5JDWZb+6RnpNkKtruv8/bWYdx/Mi+PmXR80cIvtbvReyuVJhqVgXpxHm3dd7PEQwAqiL+N5Z5to8ZQOAAAAAElFTkSuQmCC",Ve.addEventListener("load",(()=>{tt(qe)}));const Ge=document.createElement("img");Ge.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAC1SURBVEhL7ZUxCsMgFIZfuzt7Ek/hnlN4nJzC2RNk9RDOzoKO1jyTELvYxlgo+IGoT3gfIvg/ACCm0Q0UJHATQsD5jLV2W32H1hqmacoC7z0opfJJI4QQcM7Bsiwwz3MpWIutcM4LwcoqiFLKKIRofg9jzLlXfOZyP1Bw9SE/4Tc36MkQVBmCKkNQ5f8ElNJtlcHASX84RhxjLFcvsjffw+tItF1wJ4UgJdAtcfnOIcjbHgC8APM0YRoSC87fAAAAAElFTkSuQmCC",Ge.addEventListener("load",(()=>{tt(qe)}));const Ze=Oe.getContext("2d"),Pe=[{color:new p(1,0,0),alpha:255},{color:new p(1,0,0),alpha:255},{color:new p(1,0,0),alpha:255},{color:new p(1,0,0),alpha:255},{color:new p(1,0,0),alpha:255},{color:new p(1,0,0),alpha:255},{color:new p(1,0,0),alpha:255},{color:new p(1,0,0),alpha:255},{color:new p(1,0,0),alpha:255}];function $e(){for(const n of Le)n.disableAltMode();const e=new A(0,0,0);let t=0;for(const n of Le)n.visible&&(e.add(n.innerLayer.position),t++);e.divideScalar(t);for(const n of Le)n.innerLayer.position.sub(e),n.outerLayer.position.sub(e)}function _e(){_.push(document.createElement("canvas")),_[_.length-1].width=64,_[_.length-1].height=64,_[_.length-1].id="layer"+(_.length-1)+"-canvas",_[_.length-1].className="layer-canvas",ee.push(_[_.length-1].getContext("2d"));const e=document.createElement("div");e.id="layer"+(_.length-1),e.className="layer";const t=document.createElement("p");t.innerHTML="Layer "+(_.length-1),t.id="layer"+(_.length-1)+"-label",t.className="layer-label",e.appendChild(t),e.appendChild(_[_.length-1]);const n=_.length-1;e.addEventListener("mousedown",(e=>{et(n)})),te.prepend(e),ne.push([]),oe.push([])}function et(e){_[$].parentElement.style.backgroundColor="rgb(30, 30, 30)",$=e,_[$].parentElement.style.backgroundColor="rgb(10, 10, 10)"}function tt(e){qe=e,Ze.imageSmoothingEnabled=!1,Ze.clearRect(0,0,Oe.width,Oe.height),Ze.drawImage(Ve,1,1),Ze.drawImage(Ge,20*qe,0);for(let t=0;t<Pe.length;t++)Ze.fillStyle=Pe[t].color.getStyle(),Ze.fillRect(20*t+4,4,16,16);lt("rgb",255*Pe[qe].color.r,255*Pe[qe].color.g,255*Pe[qe].color.b)}tt(qe);function nt(e){G=e;const t=Math.min(.3*window.innerWidth,.5*window.innerHeight);Ae.width=Math.min(.3*window.innerWidth,.5*window.innerHeight),document.getElementById("texture-checker").width=t,se.parentElement.style.width=t+"px",se.style.width=t-35+"px",te.style.width=t+6+"px",tt(qe),at()}function ot(e){Z=e;const t=Math.min(.3*window.innerWidth,.5*window.innerHeight);Ae.height=t,document.getElementById("texture-checker").height=t,te.style.height=t-37+"px",at()}function rt(e){Pe[qe].alpha=e}function at(){I.setFromCamera(D,Se);const e=I.intersectObjects(P.children);if(e.length>0)if(X&&Ee){if(e[1].object instanceof m&&ye.includes(e[1].object)){const t=e[1].uv;it(Math.floor(64*t.x),Math.floor(64*t.y))}}else{const t=e[0].uv;it(Math.floor(64*t.x),Math.floor(64*t.y))}else it()}function it(e,t){we.map.needsUpdate=!0,pe.map.needsUpdate=!0,null==ae||ae.clearRect(0,0,64,64);for(const n of _)null==ae||ae.drawImage(n,0,0);null==le||le.clearRect(0,0,64,64),null==le||le.drawImage(re,0,0),"number"==typeof e&&"number"==typeof t&&(le.fillStyle="rgba(255, 255, 0, 0.5)",le.fillRect(e,63-t,1,1)),de.imageSmoothingEnabled=!1,null==de||de.clearRect(0,0,Ae.width,Ae.height),null==de||de.drawImage(ie,he.x,he.y,64/ue,64/ue,0,0,Ae.width,Ae.height)}function lt(e,t,n,o){switch(t=Math.floor(t),n=Math.floor(n),o=Math.floor(o),e){case"hsl":Je.h=t,Je.s=n,Je.l=o,Pe[qe].color.set(`hsl(${t}, ${n}%, ${o}%)`),We.r=Math.floor(255*Pe[qe].color.r),We.g=Math.floor(255*Pe[qe].color.g),We.b=Math.floor(255*Pe[qe].color.b);break;case"rgb":We.r=t,We.g=n,We.b=o,Pe[qe].color.set(`rgb(${t}, ${n}, ${o})`),Pe[qe].color.getHSL(Je),Je.h=Math.floor(360*Je.h),Je.s=Math.floor(100*Je.s),Je.l=Math.floor(100*Je.l);break;case"hex":Pe[qe].color.set(t),Pe[qe].color.getHSL(Je),Je.h=Math.floor(360*Je.h),Je.s=Math.floor(100*Je.s),Je.l=Math.floor(100*Je.l),We.r=Math.floor(255*Pe[qe].color.r),We.g=Math.floor(255*Pe[qe].color.g),We.b=Math.floor(255*Pe[qe].color.b)}Ie.clearRect(0,0,xe.width,xe.height),Ie.fillStyle=`rgba(${255*Pe[qe].color.r}, ${255*Pe[qe].color.g}, ${255*Pe[qe].color.b}, ${Pe[qe].alpha/255})`,Ie.fillRect(0,0,256,32),Ze.fillStyle=Pe[qe].color.getStyle(),Ze.fillRect(20*qe+4,4,16,16),function(e,t,n){const o=Me.createLinearGradient(0,0,Re.width,0);o.addColorStop(0,`hsl(0, ${t}%, ${n}%)`),o.addColorStop(.15,`hsl(60, ${t}%, ${n}%)`),o.addColorStop(.33,`hsl(120, ${t}%, ${n}%)`),o.addColorStop(.49,`hsl(180, ${t}%, ${n}%)`),o.addColorStop(.67,`hsl(240, ${t}%, ${n}%)`),o.addColorStop(.84,`hsl(300, ${t}%, ${n}%)`),o.addColorStop(1,`hsl(360, ${t}%, ${n}%)`),Me.fillStyle=o,Me.fillRect(0,0,256,32),Me.beginPath(),Me.moveTo(256*e/360,0),Me.lineTo(256*e/360,32),Me.stroke(),document.getElementById("input-h").value=`${e}`}(Je.h,Je.s,Je.l),function(e,t,n){const o=Ue.createLinearGradient(0,0,ke.width,0);o.addColorStop(0,`hsl(${e}, 0%, ${n}%)`),o.addColorStop(1,`hsl(${e}, 100%, ${n}%)`),Ue.fillStyle=o,Ue.fillRect(0,0,256,32),Ue.beginPath(),Ue.moveTo(256*t/100,0),Ue.lineTo(256*t/100,32),Ue.stroke(),document.getElementById("input-s").value=`${t}`}(Je.h,Je.s,Je.l),function(e,t,n){const o=Ye.createLinearGradient(0,0,De.width,0);o.addColorStop(0,`hsl(${e}, ${t}%, 0%)`),o.addColorStop(.5,`hsl(${e}, ${t}%, 50%)`),o.addColorStop(1,`hsl(${e}, ${t}%, 100%)`),Ye.fillStyle=o,Ye.fillRect(0,0,256,32),Ye.beginPath(),Ye.moveTo(256*n/100,0),Ye.lineTo(256*n/100,32),Ye.stroke(),document.getElementById("input-l").value=`${n}`}(Je.h,Je.s,Je.l),function(e,t,n){const o=je.createLinearGradient(0,0,Qe.width,0);o.addColorStop(0,`rgb(0, ${t}, ${n})`),o.addColorStop(1,`rgb(255, ${t}, ${n})`),je.fillStyle=o,je.fillRect(0,0,256,32),je.beginPath(),je.moveTo(e,0),je.lineTo(e,32),je.stroke(),document.getElementById("input-r").value=`${e}`}(We.r,We.g,We.b),function(e,t,n){const o=Ke.createLinearGradient(0,0,Ne.width,0);o.addColorStop(0,`rgb(${e}, 0, ${n})`),o.addColorStop(1,`rgb(${e}, 255, ${n})`),Ke.fillStyle=o,Ke.fillRect(0,0,256,32),Ke.beginPath(),Ke.moveTo(t,0),Ke.lineTo(t,32),Ke.stroke(),document.getElementById("input-g").value=`${t}`}(We.r,We.g,We.b),function(e,t,n){const o=Xe.createLinearGradient(0,0,Te.width,0);o.addColorStop(0,`rgb(${e}, ${t}, 0)`),o.addColorStop(1,`rgb(${e}, ${t}, 255)`),Xe.fillStyle=o,Xe.fillRect(0,0,256,32),Xe.beginPath(),Xe.moveTo(n,0),Xe.lineTo(n,32),Xe.stroke(),document.getElementById("input-b").value=`${n}`}(We.r,We.g,We.b),function(e,t,n,o){const r=He.createLinearGradient(0,0,Fe.width,0);r.addColorStop(0,`rgba(${255*e}, ${255*t}, ${255*n}, 0)`),r.addColorStop(1,`rgba(${255*e}, ${255*t}, ${255*n}, 255)`),He.clearRect(0,0,Fe.width,Fe.height),He.fillStyle=r,He.fillRect(0,0,256,32),He.beginPath(),He.moveTo(o,0),He.lineTo(o,32),He.stroke(),document.getElementById("input-a").value=`${o}`}(Pe[qe].color.r,Pe[qe].color.g,Pe[qe].color.b,Pe[qe].alpha),document.getElementById("input-result").value=Pe[qe].color.getHexString()+Pe[qe].alpha.toString(16)}nt(window.innerWidth),ot(window.innerHeight),_e(),_e(),_e(),et(0);const st={},ct={},At={x:-1,y:-1};function dt(){I.setFromCamera(D,Se);const e=I.intersectObjects(P.children);if(e.length>0){let t;if(X&&Ee){if(t=e[1],t.object instanceof m&&Ce.includes(t.object))return}else t=e[0];ft(Math.floor(64*t.uv.x),64-Math.floor(64*t.uv.y)-1),at()}}function ut(){I.setFromCamera(D,Se);const e=I.intersectObjects(P.children);if(e.length>0){let t;X&&Ee?(t=e[1],ht(t)):ht(e[0])||ht(e[1])}}function ht(e){var t;const n=Math.floor(64*e.uv.x),o=64-Math.floor(64*e.uv.y)-1,r=null==(t=ee[$])?void 0:t.getImageData(n,o,1,1).data;return rt(r[3]),lt("rgb",r[0],r[1],r[2]),0!==Pe[qe].alpha}function ft(e,t,n=!1){var o,r;(At.x<0||At.y<0)&&(At.x=e,At.y=t,wt(ne[$]),oe[$]=[]),null==(o=ee[$])||o.clearRect(e,t,1,1),n&&function(e,t,n,o){var r;const a=n-e,i=o-t,l=Math.sqrt(a*a+i*i);for(let s=0;s<l;s++)null==(r=ee[$])||r.clearRect(Math.floor(e+a*s/l),Math.floor(t+i*s/l),1,1)}(e,t,At.x,At.y),0===T&&(ee[$].fillStyle=`rgb(${255*Pe[qe].color.r}, ${255*Pe[qe].color.g}, ${255*Pe[qe].color.b}, ${Pe[qe].alpha/255})`,n&&function(e,t,n,o){var r;const a=n-e,i=o-t,l=Math.sqrt(a*a+i*i);for(let s=0;s<l;s++)null==(r=ee[$])||r.fillRect(Math.floor(e+a*s/l),Math.floor(t+i*s/l),1,1)}(e,t,At.x,At.y),null==(r=ee[$])||r.fillRect(e,t,1,1)),At.x=e,At.y=t,at()}function gt(e,t){!function(e,t){fe.x=e,fe.y=t}(64*e/Ae.width/ue+he.x,64*t/Ae.height/ue+he.y),N&&(1===T?function(e,t){const n=null==ae?void 0:ae.getImageData(e,t,1,1).data;rt(n[3]),lt("rgb",n[0],n[1],n[2])}(Math.floor(fe.x),Math.floor(fe.y)):ft(Math.floor(fe.x),Math.floor(fe.y),!0))}function mt(){if(oe[$].length>0){const e=oe[$].pop();wt(ne[$],e)}}function wt(e,t){var n,o,r;const a=document.createElement("canvas");a.width=64,a.height=64,null==(n=a.getContext("2d"))||n.drawImage(_[$],0,0),e.push(a),t&&(null==(o=ee[$])||o.clearRect(0,0,64,64),null==(r=ee[$])||r.drawImage(t,0,0))}window.addEventListener("blur",(()=>{F(!1),H(!1),z(!1),J(!1),z(!1),q(-1),O(!1),$e()})),document.addEventListener("mousemove",(function(e){if(D.x=e.clientX/G*2-1,D.y=-e.clientY/Z*2+1,Q&&(0===T||1===T||2===T))switch(K){case"h":bt(vt,S(e.clientX-ze.clientLeft,0,256),360);break;case"s":bt(Et,S(e.clientX-ze.clientLeft,0,256),100);break;case"l":bt(yt,S(e.clientX-ze.clientLeft,0,256),100);break;case"r":bt(Ct,S(e.clientX-ze.clientLeft,0,256),255);break;case"g":bt(Lt,S(e.clientX-ze.clientLeft,0,256),255);break;case"b":bt(St,S(e.clientX-ze.clientLeft,0,256),255);break;case"a":bt(Bt,S(e.clientX-ze.clientLeft,0,256),255);break;default:j&&(0===T||2===T?dt():ut())}Y&&0===T&&function(e,t){var n,o,r;x.setFromVector3(Se.position),o=.007*t,r=.007*e,(n=x).theta-=r,n.phi=n.phi-o;let a=0,i=.01;x.phi<i&&(a=i-x.phi),x.phi>Math.PI-i&&(a=Math.PI-i-x.phi),x.phi+=a,Se.position.setFromSpherical(x),M(Se,B)}(e.movementX,e.movementY)})),Ae.addEventListener("mousemove",(function(e){gt(e.offsetX,e.offsetY)})),Ae.addEventListener("mousedown",(function(e){q(e.button),(0===e.button||1===e.button||2===e.button)&&(J(!0),gt(e.offsetX,e.offsetY))})),document.addEventListener("contextmenu",(function(e){e.preventDefault()})),document.addEventListener("wheel",(e=>{var t,n,o;e.ctrlKey||e.altKey||tt((t=qe+(e.deltaY>0?1:-1),n=0,t>(o=8)?n+t-o-1:t<n?o-(n-t-1):t))})),Be.domElement.addEventListener("wheel",(function(e){!e.ctrlKey&&!e.altKey||Se.position.length()<13&&e.deltaY<0||Se.position.length()>40&&e.deltaY>0||Se.position.multiplyScalar(Math.pow(Math.pow(2,1/4),e.deltaY/100));e.preventDefault()})),Ae.addEventListener("wheel",(function(e){e.ctrlKey&&(!function(e){const t=S(ue*Math.pow(Math.pow(2,1/4),e),1,8),n=he.x,o=he.y,r=fe.x,a=fe.y,i=64/t;he={x:ue/t*(n-r)+r,y:ue/t*(o-a)+a},he.x=S(he.x,0,64-i),he.y=S(he.y,0,64-i),ue=t}(e.deltaY/-100),at());e.preventDefault()})),Be.domElement.addEventListener("mousemove",(e=>{at()})),Be.domElement.addEventListener("mousedown",(function(e){q(e.button),I.setFromCamera(D,Se);const t=I.intersectObjects(P.children);if(!e.ctrlKey&&t.length>0)if(e.altKey){if(0!==e.button)return;if(!(t[0].object instanceof m))return;let n=ye.indexOf(t[0].object);if(-1===n)return;!function(e){let t=0;for(const o of Le)o.visible&&t++;if(1===t&&Le[e].visible)return;const n=Le[e];n.setVisible(!n.visible)}(n)}else z(!0),0===e.button||2===e.button?dt():1===e.button&&ut();else F(!0)})),document.addEventListener("mousedown",(function(e){H(!0),q(e.button)})),document.addEventListener("mouseup",(function(e){F(!1),H(!1),z(!1),J(!1),W(""),At.x=-1,At.y=-1})),document.addEventListener("keydown",(function(e){e.ctrlKey&&("KeyS"===e.code&&(U(),e.preventDefault()),"KeyZ"===e.code&&(e.shiftKey?mt():function(){if(ne[$].length>0){const e=ne[$].pop();wt(oe[$],e)}}(),e.preventDefault()),e.ctrlKey&&"KeyY"===e.code&&(mt(),e.preventDefault()));"Tab"===e.code&&(!function(){Ee=!Ee;for(const e of Le)e.visible&&Ee?P.add(e.outerLayer):P.remove(e.outerLayer)}(),e.preventDefault());"Shift"===e.key&&(O(!0),e.preventDefault());"Alt"===e.key&&(!function(){for(const e of Le)e.enableAltMode()}(),e.preventDefault());at(),st[e.key]=!0,ct[e.code]=!0})),document.addEventListener("keyup",(function(e){"Shift"===e.key&&O(!1);"Alt"===e.key&&($e(),e.preventDefault());at(),st[e.key]=!1,ct[e.code]=!1})),document.addEventListener("dragover",(e=>{e.preventDefault()}));const pt=new FileReader;function bt(e,t,n){e(t*n/256)}function vt(e){lt("hsl",e,Je.s,Je.l)}function Et(e){lt("hsl",Je.h,e,Je.l)}function yt(e){lt("hsl",Je.h,Je.s,e)}function Ct(e){lt("rgb",e,We.g,We.b)}function Lt(e){lt("rgb",We.r,e,We.b)}function St(e){lt("rgb",We.r,We.g,e)}function Bt(e){rt(Math.floor(e)),lt("rgb",We.r,We.g,We.b)}pt.addEventListener("load",(function(){ge.src=pt.result}),!1),document.addEventListener("drop",(e=>{var t;if(e.preventDefault(),null==(t=e.dataTransfer)?void 0:t.items){if("file"===e.dataTransfer.items[0].kind){const t=e.dataTransfer.items[0].getAsFile();(null==t?void 0:t.name.endsWith(".png"))&&pt.readAsDataURL(t)}}else{const t=e.dataTransfer.files[0];t.name.endsWith("png")&&pt.readAsDataURL(t)}})),ce.addEventListener("mouseenter",(e=>{ce.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACJSURBVChTY2RgYPgPxPgASA0DE4jYevA/GP//D8EwNogGAjABVggCly+eYvj16xcYw9ggGqYYrhAZFKYbQFkMDPW1ZWCaBUxCgbVrDZQFASEhIVAWBPwHGg8Gly9fRsEgYGJXCrIbYTXITWpqaigYJAYDKG68desWCkYGcDeiuw8dEBPgQMDAAAApbl3gtKADlwAAAABJRU5ErkJggg=="})),ce.addEventListener("mouseleave",(e=>{ce.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACDSURBVChTjZCxDcAgDAQ/UWahYgAKxHhULEDDVFSMQkOwMYikiHLS2w96YYsDQOv6gjI4qcQYWa011vTUO/wQB4lSCmqtrOmpz/AK7njvxQEpJe4XV8E5J25grRW3BUMIyDnLaaC1hjGG/RpNOymlHqK7yWNHWn7Xzhr93u/Nnw/vADdsY0M0wsX8pgAAAABJRU5ErkJggg=="})),ce.addEventListener("mousedown",(e=>{U()})),Oe.addEventListener("mousedown",(function(e){const t=Oe.clientWidth*(1/184),n=Oe.clientWidth*(20/184);tt(S(Math.floor((e.offsetX-t)/n),0,8))})),window.addEventListener("resize",(function(){nt(window.innerWidth),ot(window.innerHeight),Be.setSize(G,Z),Se.aspect=G/Z,Se.updateProjectionMatrix()})),Re.addEventListener("mousedown",(e=>{W("h"),bt(vt,e.offsetX,360)})),ke.addEventListener("mousedown",(e=>{W("s"),bt(Et,e.offsetX,100)})),De.addEventListener("mousedown",(e=>{W("l"),bt(yt,e.offsetX,100)})),Qe.addEventListener("mousedown",(e=>{W("r"),bt(Ct,e.offsetX,255)})),Ne.addEventListener("mousedown",(e=>{W("g"),bt(Lt,e.offsetX,255)})),Te.addEventListener("mousedown",(e=>{W("b"),bt(St,e.offsetX,255)})),Fe.addEventListener("mousedown",(e=>{W("a"),bt(Bt,e.offsetX,255)})),null==(e=document.getElementById("input-h"))||e.addEventListener("input",(function(e){vt(S(Number(this.value),0,360))})),null==(t=document.getElementById("input-s"))||t.addEventListener("input",(function(e){Et(S(Number(this.value),0,100))})),null==(n=document.getElementById("input-l"))||n.addEventListener("input",(function(e){yt(S(Number(this.value),0,100))})),null==(o=document.getElementById("input-r"))||o.addEventListener("input",(function(e){Ct(S(Number(this.value),0,255))})),null==(r=document.getElementById("input-g"))||r.addEventListener("input",(function(e){Lt(S(Number(this.value),0,255))})),null==(a=document.getElementById("input-b"))||a.addEventListener("input",(function(e){St(S(Number(this.value),0,255))})),null==(i=document.getElementById("input-a"))||i.addEventListener("input",(function(e){Bt(S(Number(this.value),0,255))}));const xt=document.getElementsByClassName("up");for(const Yt of xt)Yt.addEventListener("mousedown",Rt),Yt.addEventListener("mouseenter",(function(e){this.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAHCAYAAADebrddAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABXSURBVChTY8AK2O3+Q1kEAFDh1oP//2PTwASlIQCkcNdBhssXTzGYmJtj2MAIpVEUwsCaNWsYzpw8ycDw8xBYHUQxFoUwgKyBEZeJ6ACkAawYyicAGBgA8SEyl/0Y258AAAAASUVORK5CYII="})),Yt.addEventListener("mouseleave",(function(e){this.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAHCAYAAADebrddAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABSSURBVChThYzBEYAwCATRpqiVfvjQAs3E4QQHkzju5zhmgT4YmS/OzM4QESRaY5YhujsxMzq2yZEZPGKhqmRmMcIreRGLfhDy9uNMHEC+6x9EF8paKsuTxLiWAAAAAElFTkSuQmCC"}));const It=document.getElementsByClassName("down");for(const Yt of It)Yt.addEventListener("mousedown",Mt),Yt.addEventListener("mouseenter",(function(e){this.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAHCAYAAADebrddAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABcSURBVChTY2Rgt/vPQCQAK9666yCUiwCXL56CshgY1qxZw3Dm5EmgYhCAakBWAAMwhQw/DzFCFIMAFg3ICqFCSACk4eD//x2TTv43sSv9T9g/UA2EFcIAVoUMDABzgTWRDJWebQAAAABJRU5ErkJggg=="})),Yt.addEventListener("mouseleave",(function(e){this.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAHCAYAAADebrddAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABPSURBVChTjY9bCgAgCAS3+5/A+/jjFbxMpWVID2hAUZj92AKg9vnCZSIaX0JV5wUwM0TEZcMDWQhC7JSQjSOQxbUSK7CLLyxgpb+LX0SgAXA+LsskBDiEAAAAAElFTkSuQmCC"}));function Rt(e){switch(this.classList[1]){case"arrow-h":vt(S(Je.h+1,0,360));break;case"arrow-s":Et(S(Je.s+1,0,100));break;case"arrow-l":yt(S(Je.l+1,0,100));break;case"arrow-r":Ct(S(We.r+1,0,255));break;case"arrow-g":Lt(S(We.g+1,0,255));break;case"arrow-b":St(S(We.b+1,0,255));break;case"arrow-a":Bt(S(Pe[qe].alpha+1,0,255))}}function Mt(e){switch(this.classList[1]){case"arrow-h":vt(S(Je.h-1,0,360));break;case"arrow-s":Et(S(Je.s-1,0,100));break;case"arrow-l":yt(S(Je.l-1,0,100));break;case"arrow-r":Ct(S(We.r-1,0,255));break;case"arrow-g":Lt(S(We.g-1,0,255));break;case"arrow-b":St(S(We.b-1,0,255));break;case"arrow-a":Bt(S(Pe[qe].alpha-1,0,255))}}null==(l=document.getElementById("input-result"))||l.addEventListener("input",(function(e){lt("hex",(t=this.value,n=Pe[qe].color.getHex(),6!==t.length?n:Number("0x"+t)),0,0);var t,n}));const kt=document.getElementsByTagName("img");for(const Yt of kt)Yt.onmousedown=Ut;function Ut(e){e.preventDefault()}M(Se,B);const Dt=function(){requestAnimationFrame(Dt),Be.render(P,Se)};Dt();
